{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}Request a Benefit{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Request a Benefit</h2>

    <form method="POST">
        {% csrf_token %}

        <div class="mb-3">
            <label for="benefit_type" class="form-label">Select Benefit Type:</label>
            <select id="benefit_type" name="benefit_type" class="form-select" required>
                <option value="" selected disabled>-- Choose One --</option>
                <option value="wedding">Wedding Benefit</option>
                <option value="funeral">Funeral Benefit</option>
                <option value="childbirth">Childbirth Benefit</option>
                <option value="other">Other (Specify Below)</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="event_date" class="form-label">Event Date:</label>
            <input type="date" id="event_date" name="event_date" class="form-control" required>
        </div>

        <!-- Reason for Other -->
        <div class="mb-3" id="reason_container" style="display: none;">
            <label for="reason" class="form-label">Reason for Request (if 'Other'):</label>
            <textarea id="reason" name="reason" class="form-control" rows="3"></textarea>
        </div>

        <!-- Amount Requested (only for 'Other') -->
        <div class="mb-3" id="amount_container" style="display: none;">
            <label for="amount_requested" class="form-label">Requested Amount:</label>
            <input type="number" id="amount_requested" name="amount_requested" class="form-control" step="0.01" min="0">
        </div>

        <button type="submit" class="btn btn-primary">Submit Request</button>
    </form>
</div>

<script>
    document.getElementById("benefit_type").addEventListener("change", function () {
        var reasonContainer = document.getElementById("reason_container");
        var amountContainer = document.getElementById("amount_container");

        if (this.value === "other") {
            reasonContainer.style.display = "block";
            amountContainer.style.display = "block";  // Show amount field
            document.getElementById("amount_requested").required = true;
        } else {
            reasonContainer.style.display = "none";
            amountContainer.style.display = "none";  // Hide amount field
            document.getElementById("amount_requested").required = false;
        }
    });
</script>

{% endblock %}
